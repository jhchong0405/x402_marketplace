# Polymarket 黄金回测 — 交易模式与回测结果

## 一、交易模式

### 1.1 交易标的

Polymarket 上每个交易日有一个二元事件：**"Gold (GC) Up or Down on [日期]?"**

- **Up token**：当天金价上涨 → 结算价 $1；下跌 → 结算价 $0
- **Down token**：当天金价下跌 → 结算价 $1；上涨 → 结算价 $0
- 两个 token 价格之和 ≈ $1（互补关系）

### 1.2 交易决策流程

```
┌─────────────────────────────────────────────────────┐
│  Step 1: 站在前一天，运行 AI 回归模型                    │
│  输入: 365天历史金价 + 10个宏观指标（美债、美元、VIX等）    │
│  输出: P(Up) = 模型预测的上涨概率                        │
│  例: P(Up) = 83% → 模型预测方向 = Up                    │
├─────────────────────────────────────────────────────┤
│  Step 2: 每小时检查 Polymarket 市场定价                  │
│  读取: Up token 当前价格（= 市场隐含上涨概率）             │
│  例: Up token = $0.55 → 市场认为上涨概率 55%             │
├─────────────────────────────────────────────────────┤
│  Step 3: 计算 Edge（模型 vs 市场的差异）                  │
│  Edge = 模型概率 - 市场定价 = 83% - 55% = +28%          │
├─────────────────────────────────────────────────────┤
│  Step 4: 交易决策（严格模式）                             │
│  ✅ 模型方向 = Up，且 Edge_Up = +28% > 5% 阈值           │
│  → 买入 $1 的 Up token @ $0.55                          │
│                                                         │
│  ❌ 如果 Edge < 5%，或市场比模型更看涨 → 不交易            │
└─────────────────────────────────────────────────────┘
```

### 1.3 四种场景

| 场景 | 模型 | 市场 | Edge | 决策 |
|------|------|------|------|------|
| **模型看涨 + 市场低估** | P(Up)=83% | Up=$0.55 | +28% | ✅ 买 Up token |
| **模型看跌 + 市场低估** | P(Up)=5% | Down=$0.30 | +65% | ✅ 买 Down token |
| **模型看涨 + 市场更看涨** | P(Up)=57% | Up=$0.84 | -27% | ❌ 不交易（没优势） |
| **模型看涨 + 差异太小** | P(Up)=60% | Up=$0.58 | +2% | ❌ 不交易（edge不够） |

### 1.4 盈亏计算

```
买入 $1 的 Up token @ $0.55
→ 获得 1/0.55 = 1.818 份

如果金价上涨（Up 赢）:
  收入 = 1.818 × $1 = $1.818
  盈利 = $1.818 - $1.00 = +$0.82  (+81.8%)

如果金价下跌（Down 赢）:
  收入 = 1.818 × $0 = $0
  亏损 = $0 - $1.00 = -$1.00  (-100%)
```

**关键特性**: 每笔最多亏 $1，但盈利无上限（买入价越低，盈利倍数越高）。

---

## 二、回测计算方法

### 2.1 数据

- **时间范围**: 2025年10月 ~ 2026年2月
- **事件数量**: 47 个已结算的 Gold GC Up/Down 事件
- **实际结果分布**: Up=28 (60%) | Down=19 (40%)
- **价格数据**: 每个事件的小时级 K 线（通过 Dome API 获取）

### 2.2 模型

- **方法**: Logistic 回归（站在前一天，只用历史数据）
- **特征**: 10 个宏观代理指标（美国10Y/2Y国债收益率、美元指数、标普500、VIX、原油、白银、TIPS ETF、黄金ETF成交量、铜）
- **训练窗口**: 365 天滚动窗口
- **模型方向准确率**: 29/47 = 61.7%

### 2.3 指标定义

| 指标 | 公式 |
|------|------|
| **胜率** | 盈利交易数 / 总交易数 |
| **总盈亏 (PnL)** | Σ 每笔交易盈亏 |
| **ROI** | 总盈亏 / 总投入 × 100% |
| **最大回撤** | 权益曲线从峰值到谷值的最大跌幅 |
| **Sharpe (简化)** | mean(每笔PnL) / std(每笔PnL) |
| **盈利笔均盈** | 盈利交易的平均盈利 |
| **亏损笔均亏** | 亏损交易的平均亏损（固定 -$1） |

---

## 三、回测结果

### 3.1 参数对比表（严格模式 vs 原始模式）

#### 原始模式（允许反向交易）

| Edge 阈值 | 交易数 | 胜率 | 总投入 | 总盈亏 | ROI | 最大回撤 | Sharpe |
|-----------|--------|------|--------|--------|-----|----------|--------|
| 2% | 565 | 40.4% | $565 | +$312.25 | +55.3% | $53.10 | 0.126 |
| 5% | 523 | 38.4% | $523 | +$267.35 | +51.1% | $53.97 | 0.117 |
| 8% | 464 | 38.1% | $464 | +$271.08 | +58.4% | $60.98 | 0.128 |
| 10% | 430 | 37.4% | $430 | +$269.75 | +62.7% | $58.96 | 0.133 |
| 15% | 349 | 37.8% | $349 | +$290.81 | +83.3% | $57.66 | 0.162 |
| 20% | 298 | 37.9% | $298 | +$298.28 | +100.1% | $68.37 | 0.181 |

#### 严格模式（只跟模型方向交易）

| Edge 阈值 | 交易数 | 胜率 | 总投入 | 总盈亏 | ROI | 最大回撤 | Sharpe |
|-----------|--------|------|--------|--------|-----|----------|--------|
| 2% | 373 | 53.4% | $373 | +$203.63 | +54.6% | $55.00 | 0.136 |
| 5% | 345 | 51.0% | $345 | +$201.17 | +58.3% | $53.00 | 0.140 |
| 8% | 312 | 51.3% | $312 | +$214.07 | +68.6% | $50.00 | 0.157 |
| 10% | 292 | 50.0% | $292 | +$214.69 | +73.5% | $44.00 | 0.163 |
| 15% | 260 | 46.9% | $260 | +$213.20 | +82.0% | $43.00 | 0.172 |
| 20% | 235 | 44.7% | $235 | +$209.93 | +89.3% | $42.00 | 0.179 |

#### 模式对比（edge=0.05）

| 指标 | 原始模式 | 严格模式 | 变化 |
|------|----------|----------|------|
| 交易数 | 523 | 345 | -34% |
| **胜率** | **38.4%** | **51.0%** | **+12.6pp** |
| 总盈亏 | +$267 | +$201 | -25% |
| **ROI** | +51.1% | **+58.3%** | **+7.2pp** |
| 最大回撤 | $54.0 | $53.0 | -2% |
| **Sharpe** | 0.117 | **0.140** | **+20%** |

### 3.2 严格模式 edge=0.05 按事件明细

| 日期 | 模型P(Up) | 实际 | 交易方向 | 交易数 | 盈利 | 亏损 | 净盈亏 | ROI |
|------|-----------|------|----------|--------|------|------|--------|-----|
| 2025-10-27 | 77.0% | Down | Up | 12 | 0 | 12 | -$12.00 | -100.0% |
| 2025-10-28 | 77.0% | Down | Up | 5 | 0 | 5 | -$5.00 | -100.0% |
| 2025-10-30 | 49.2% | Up | Down | 1 | 0 | 1 | -$1.00 | -100.0% |
| 2025-10-31 | 24.6% | Down | Down | 1 | 1 | 0 | +$1.00 | +100.0% |
| 2025-11-03 | 71.1% | Up | Up | 7 | 7 | 0 | +$7.64 | +109.1% |
| 2025-11-04 | 71.1% | Down | Up | 4 | 0 | 4 | -$4.00 | -100.0% |
| 2025-11-05 | 90.6% | Up | Up | 5 | 5 | 0 | +$2.65 | +53.0% |
| 2025-11-06 | 92.5% | Down | Up | 2 | 0 | 2 | -$2.00 | -100.0% |
| 2025-12-09 | 80.4% | Up | Up | 1 | 1 | 0 | +$0.82 | +81.8% |
| 2025-12-10 | 39.5% | Down | Down | 1 | 1 | 0 | +$49.00 | +4900.0% |
| 2025-12-12 | 22.4% | Up | Down | 1 | 0 | 1 | -$1.00 | -100.0% |
| 2025-12-15 | 57.1% | Up | Up | 3 | 3 | 0 | +$8.38 | +279.2% |
| 2025-12-16 | 57.1% | Down | Up | 2 | 0 | 2 | -$2.00 | -100.0% |
| 2025-12-23 | 82.6% | Up | Up | 5 | 5 | 0 | +$4.24 | +84.8% |
| 2025-12-24 | 70.9% | Down | Up | 7 | 0 | 7 | -$7.00 | -100.0% |
| 2025-12-29 | 77.9% | Down | Up | 22 | 0 | 22 | -$22.00 | -100.0% |
| 2025-12-30 | 77.9% | Up | Up | 6 | 6 | 0 | +$4.51 | +75.1% |
| 2025-12-31 | 31.7% | Down | Down | 3 | 3 | 0 | +$7.64 | +254.8% |
| 2026-01-02 | 22.7% | Down | Down | 14 | 14 | 0 | +$115.62 | +825.9% |
| 2026-01-05 | 83.3% | Up | Up | 7 | 7 | 0 | +$2.56 | +36.5% |
| 2026-01-06 | 83.3% | Up | Up | 6 | 6 | 0 | +$6.52 | +108.7% |
| 2026-01-07 | 7.1% | Down | Down | 6 | 6 | 0 | +$7.99 | +133.2% |
| 2026-01-08 | 5.0% | Down | Down | 15 | 15 | 0 | +$18.15 | +121.0% |
| 2026-01-09 | 26.5% | Up | Down | 15 | 0 | 15 | -$15.00 | -100.0% |
| 2026-01-12 | 82.4% | Up | Up | 6 | 6 | 0 | +$15.98 | +266.3% |
| 2026-01-13 | 82.4% | Down | Up | 5 | 0 | 5 | -$5.00 | -100.0% |
| 2026-01-14 | 71.0% | Up | Up | 2 | 2 | 0 | +$1.57 | +78.7% |
| 2026-01-15 | 57.6% | Down | Up | 7 | 0 | 7 | -$7.00 | -100.0% |
| 2026-01-16 | 78.7% | Down | Up | 5 | 0 | 5 | -$5.00 | -100.0% |
| 2026-01-20 | 84.9% | Up | Up | 24 | 24 | 0 | +$9.86 | +41.1% |
| 2026-01-21 | 84.9% | Up | Up | 1 | 1 | 0 | +$0.96 | +96.1% |
| 2026-01-22 | 81.4% | Up | Up | 15 | 15 | 0 | +$41.02 | +273.4% |
| 2026-01-23 | 15.9% | Up | Down | 12 | 0 | 12 | -$12.00 | -100.0% |
| 2026-01-26 | 61.6% | Up | Up | 1 | 1 | 0 | +$4.56 | +455.6% |
| 2026-01-27 | 61.6% | Up | Up | 10 | 10 | 0 | +$21.44 | +214.4% |
| 2026-01-28 | 71.0% | Up | Up | 1 | 1 | 0 | +$0.61 | +61.3% |
| 2026-01-29 | 28.9% | Up | Down | 16 | 0 | 16 | -$16.00 | -100.0% |
| 2026-01-30 | 81.0% | Down | Up | 14 | 0 | 14 | -$14.00 | -100.0% |
| 2026-02-02 | 62.7% | Down | Up | 23 | 0 | 23 | -$23.00 | -100.0% |
| 2026-02-03 | 62.7% | Up | Up | 1 | 1 | 0 | +$1.00 | +100.0% |
| 2026-02-04 | 97.7% | Up | Up | 19 | 19 | 0 | +$14.22 | +74.9% |
| 2026-02-05 | 10.9% | Down | Down | 16 | 16 | 0 | +$22.24 | +139.0% |
| 2026-02-06 | 14.2% | Up | Down | 16 | 0 | 16 | -$16.00 | -100.0% |

### 3.3 关键发现

1. **模型预测对的事件 = 全部盈利**：模型方向正确时，该事件所有交易都赢（因为严格模式只买模型方向）
2. **模型预测错的事件 = 全部亏损**：方向错了，该事件投入全部归零
3. **盈亏不对称**：赢的时候赚的多（买入价低 → 高倍回报），输的时候固定亏 $1/笔
4. **最大单事件盈利**: 2026-01-02 (+$115.62, ROI +826%)，模型强烈看跌且正确
5. **最大单事件亏损**: 2026-02-02 (-$23.00)，模型看涨但实际下跌，23小时都在买入
